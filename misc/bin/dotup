#!/usr/bin/env bash

##--> A script to update the dotfiles <--##
# URL - https://github.com/adityastomar67/dots

[ -d $HOME/dotfiles ] && cd $HOME/dotfiles
clear

printf "$(tput bold)Updating the config...$(tput sgr0)\n\n"
printf "Choose wether you want to reset the changes or persist them over update?..\n"
select opt in "Remove" "Persist"; do
    if [ $opt ]; then
        break
    fi
done

if [ $opt = "Remove" ]; then
    printf "\n$(tput setaf 1)❌ Removing the changes...$(tput sgr0)\n"
    sleep 2
    git reset --hard
    printf "\n$(tput setaf 3) Updating the configuration...$(tput sgr0)\n"
    sleep 1
    git pull

else
    printf "\n$(tput setaf 3) Updating the configuration...$(tput sgr0)\n"
    git stash >/dev/null 2>&1
    git pull
    git stash pop >/dev/null 2>&1
fi

printf "\n$(tput setaf 2)$(tput bold)✓ Successfully Updated the Dotfiles.$(tput sgr0)\n"
